<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light only">
<meta name="theme-color" content="#ffffff">
<title>NUVIA Safe - Dental Laboratory Safety</title>
<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
:root{color-scheme:light only}
*{margin:0;padding:0;box-sizing:border-box;color-scheme:light!important}
html{scroll-behavior:smooth;background:#fff!important;color-scheme:light!important;background-color:#fff!important}
body{background:#fff!important;background-color:#fff!important;color:#000!important;font-family:'Work Sans',sans-serif;font-weight:300;font-size:15px;line-height:1.6}
@media (prefers-color-scheme: dark){html{background:#fff!important;color-scheme:light!important}body{background:#fff!important;color:#000!important}}
header{position:fixed;top:0;left:0;right:0;background:#fff!important;border-bottom:1px solid #e5e5e5;z-index:100;padding:1.5rem 0}
.header-inner{max-width:1400px;margin:0 auto;padding:0 3rem;display:flex;align-items:center;justify-content:space-between}
.logo{font-size:22px;font-weight:700;letter-spacing:-.02em;color:#1e3a8a;font-family:'Work Sans',sans-serif}
.logo-safe{font-weight:300;font-size:11px;text-transform:uppercase;letter-spacing:.15em;color:#64748b;margin-left:.5rem}
.header-right{display:flex;gap:1rem;align-items:center}
.lang-toggle{display:flex;background:#f5f5f5;border:1px solid #e5e5e5;border-radius:4px;overflow:hidden}
.lang-btn{background:transparent;border:none;padding:.5rem .75rem;font:inherit;font-size:12px;font-weight:500;cursor:pointer;text-transform:uppercase;letter-spacing:.05em;color:#666;transition:all .2s}
.lang-btn.active{background:#1e3a8a;color:#fff}
.lang-btn:hover:not(.active){background:#eee}
.emergency-btn{background:#d32f2f;color:#fff;border:none;padding:.75rem 1.5rem;font:inherit;font-size:13px;cursor:pointer;transition:opacity .2s}
.emergency-btn:hover{opacity:.8}
.main{padding-top:80px;background:#fff!important}
.hero{max-width:1400px;margin:0 auto;padding:8rem 3rem 6rem;background:#fff!important}
.hero h1{font-size:48px;font-weight:300;line-height:1.2;margin-bottom:1.5rem;color:#000!important}
.hero p{font-size:17px;color:#666;margin-bottom:2.5rem;max-width:700px}
.search-box{position:relative;max-width:500px}
.search-box input{width:100%;border:1px solid #e5e5e5;padding:1rem 1rem 1rem 3rem;font:inherit;font-size:15px;outline:none;transition:border-color .2s;background:#fff!important;color:#000!important}
.search-box input:focus{border-color:#1e3a8a}
.search-icon{position:absolute;left:1rem;top:50%;transform:translateY(-50%);width:16px;opacity:.4}
.welcome-section{max-width:700px;margin:2rem 0;padding:1.5rem;border:1px solid #e5e5e5;background:#fafafa}
.welcome-section h3{font-size:14px;font-weight:600;margin-bottom:1rem;text-transform:uppercase;letter-spacing:.08em;color:#1e3a8a}
.welcome-section p{font-size:14px;line-height:1.8;color:#333;margin-bottom:1rem}
.welcome-section ul{margin-left:1.5rem;margin-bottom:1rem}
.welcome-section li{font-size:14px;line-height:1.8;color:#333;margin-bottom:.5rem}
.welcome-section .priority{font-weight:600;color:#d32f2f;font-size:14px;margin-top:1rem;padding-top:1rem;border-top:1px solid #e5e5e5}
.section{max-width:1400px;margin:0 auto;padding:4rem 3rem;border-bottom:1px solid #e5e5e5;background:#fff!important}
.section-title{font-size:13px;text-transform:uppercase;letter-spacing:.15em;color:#999;margin-bottom:1.5rem}
.filters{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:2rem}
.filter-btn{background:#fff;border:1px solid #e5e5e5;color:#666;padding:.5rem 1rem;font:inherit;font-size:13px;cursor:pointer;transition:all .2s}
.filter-btn:hover{border-color:#1e3a8a;color:#1e3a8a}
.filter-btn.active{background:#1e3a8a;color:#fff;border-color:#1e3a8a}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1px;background:#e5e5e5;border:1px solid #e5e5e5}
.card{background:#fff!important;padding:2.5rem;cursor:pointer;transition:background .15s;color:#000!important}
.card:hover{background:#fafafa!important}
.card-header{display:flex;justify-content:space-between;margin-bottom:1.5rem}
.card-icon{font-size:24px;opacity:.7}
.risk-badge{font-size:10px;text-transform:uppercase;padding:.35rem .75rem;border-radius:999px;font-weight:500}
.badge-danger{background:#f5f5f5;color:#d32f2f!important}
.badge-warning{background:#f5f5f5;color:#f57c00!important}
.badge-low{background:#f5f5f5;color:#388e3c!important}
.card h3{font-size:18px;font-weight:400;margin-bottom:.5rem;color:#000!important}
.card-cat{font-size:12px;text-transform:uppercase;color:#999;margin-bottom:1rem;letter-spacing:.08em}
.card-desc{font-size:14px;color:#666;line-height:1.6;margin-bottom:1.5rem}
.card-footer{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:#000;padding-top:1rem;border-top:1px solid #f0f0f0}
.list-card{border:1px solid #e5e5e5;padding:1.5rem;margin-bottom:1rem;background:#fff}
.list-card h3{font-size:16px;font-weight:500;margin-bottom:.5rem}
.list-card p{font-size:14px;color:#666;margin-bottom:.25rem}
.list-card .phone{font-weight:500;color:#000;margin-top:.5rem}
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:200;padding:2rem;overflow-y:auto}
.modal-overlay.open{display:flex;align-items:flex-start;justify-content:center}
.modal{background:#fff;max-width:800px;width:100%;margin:auto}
.modal-header{padding:3rem;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:flex-start}
.modal h2{font-size:24px;font-weight:400;margin-bottom:.5rem}
.modal-cat{font-size:12px;text-transform:uppercase;letter-spacing:.1em;color:#999}
.close-btn{background:transparent;border:1px solid #e5e5e5;width:40px;height:40px;cursor:pointer;font-size:20px;color:#999;display:flex;align-items:center;justify-content:center;transition:all .2s}
.close-btn:hover{border-color:#000;color:#000}
.modal-tabs{display:flex;border-bottom:1px solid #f0f0f0;padding:0 3rem}
.tab-btn{background:transparent;border:none;border-bottom:2px solid transparent;padding:1rem 0;margin-right:2rem;font:inherit;font-size:13px;text-transform:uppercase;letter-spacing:.08em;color:#999;cursor:pointer;transition:all .2s}
.tab-btn.active{color:#000;border-bottom-color:#000}
.modal-body{padding:3rem}
.tab-panel{display:none}
.tab-panel.active{display:block}
.exposure-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:2rem;margin-bottom:2rem}
.exposure-card{border:1px solid #e5e5e5;padding:1.5rem;background:#fafafa}
.exposure-card h4{font-size:14px;font-weight:600;margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem}
.exposure-card p{font-size:14px;color:#666;line-height:1.6}
.exposure-icon{font-size:20px}
.alert-block{border:1px solid #e5e5e5;padding:1.5rem;margin-top:2rem}
.alert-block h4{font-size:11px;text-transform:uppercase;letter-spacing:.12em;margin-bottom:1rem;font-weight:500}
.alert-block.red{border-color:#d32f2f;background:#fef5f5}
.alert-block.red h4{color:#d32f2f}
.alert-block.yellow{border-color:#f57c00;background:#fff8f0}
.alert-block.yellow h4{color:#f57c00}
.alert-block ul{list-style:none;display:flex;flex-direction:column;gap:.5rem}
.alert-block li{font-size:14px;line-height:1.6;padding-left:1.5rem;position:relative}
.alert-block li::before{content:'‚Äî';position:absolute;left:0;opacity:.4}
.epp-list{display:flex;flex-direction:column;gap:1rem}
.epp-item{padding:1rem 0;border-bottom:1px solid #f0f0f0;font-size:14px}
.epp-item:last-child{border-bottom:none}
.qr-section{margin-top:2rem;padding:2rem;border:1px solid #e5e5e5;text-align:center;background:#fafafa}
.qr-code{display:inline-block;margin:1rem 0}
footer{border-top:1px solid #e5e5e5;padding:3rem;text-align:center;background:#fff}
.footer-logo{font-size:12px;text-transform:uppercase;letter-spacing:.15em;color:#999}
@media (max-width:768px){
.hero{padding:4rem 1.5rem}
.header-inner,.section{padding-left:1.5rem;padding-right:1.5rem}
.modal-header,.modal-body{padding:2rem}
.modal-tabs{padding:0 2rem}
.header-right{flex-wrap:wrap}
.exposure-grid{grid-template-columns:1fr}
}
@media print{header,.emergency-btn,.filters,.modal-overlay{display:none!important}}
</style>
</head>
<body>
<script>
// FORCE WHITE BACKGROUND - Override any dark mode
(function(){
const s=document.createElement('style');
s.id='force-white';
s.textContent=`
html,body{background:#fff!important;background-color:#fff!important;color:#000!important;filter:none!important;-webkit-filter:none!important}
*{color-scheme:light!important}
@media(prefers-color-scheme:dark){
html,body{background:#fff!important;color:#000!important;filter:invert(0)!important}
}
`;
document.head.insertBefore(s,document.head.firstChild);
document.documentElement.style.cssText='background:#fff!important;color-scheme:light!important';
document.body.style.cssText='background:#fff!important;color:#000!important';
})();
</script>
<header>
<div class="header-inner">
<div class="logo">NUVIA<span class="logo-safe">Safe</span></div>
<div class="header-right">
<div class="lang-toggle">
<button class="lang-btn active" onclick="setLang('en')">EN</button>
<button class="lang-btn" onclick="setLang('es')">ES</button>
</div>
</div>
</div>
</header>

<main class="main">
<section class="hero">
<h1 id="title">Dental Laboratory Safety System</h1>
<p id="subtitle">Fast access to emergency protocols, material safety data, and protective equipment guidelines for dental laboratory professionals.</p>

<div class="welcome-section" id="welcome">
<h3 id="welcome-title">About This Platform</h3>
<p id="welcome-p1">This platform was created to provide quick, clear, and reliable access to emergency protocols, safety information, and protective equipment used in dental laboratories.</p>
<p id="welcome-p2">NUVIA Dental Safety centralizes essential guidelines for the safe handling of materials and for acting effectively in case of exposure or injury. Its goal is to reduce response time to incidents, support informed decision-making, and foster a safety culture for all people who work in or visit the laboratory.</p>
<p class="priority" id="welcome-priority">Your safety is a priority. If in doubt, follow emergency protocols and seek immediate medical attention.</p>
</div>

<div class="search-box">
<svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
<input id="search" placeholder="Search materials..." oninput="filter()">
</div>
</section>

<section id="materials" class="section">
<p class="section-title" id="ft">Filter Materials</p>
<div class="filters">
<button class="filter-btn active" onclick="setFilter('all',this)" id="f0">All</button>
<button class="filter-btn" onclick="setFilter('acids',this)" id="f1">Acids</button>
<button class="filter-btn" onclick="setFilter('resins',this)" id="f2">Resins</button>
<button class="filter-btn" onclick="setFilter('solvents',this)" id="f3">Solvents</button>
<button class="filter-btn" onclick="setFilter('metals',this)" id="f4">Metals</button>
<button class="filter-btn" onclick="setFilter('others',this)" id="f5">Others</button>
</div>
<div class="grid" id="grid"></div>
</section>

<section id="urgent" class="section">
<p class="section-title" id="urgent-title">Urgent Care Centers - Denver Area</p>
<div id="urgent-list"></div>
</section>

<section id="forms" class="section">
<p class="section-title" id="forms-title">Downloadable Forms</p>
<div class="list-card">
<h3 id="form1">First Report of Injury Form</h3>
<p id="form1-desc">Complete within 24 hours of any workplace injury or chemical exposure</p>
<a href="First_Report_of_Injury_Form.pdf" download class="emergency-btn" style="display:inline-block;margin-top:1rem;text-decoration:none">Download PDF</a>
</div>
</section>

<section id="incident-report" class="section">
<p class="section-title" id="incident-title">Report Incident Online</p>

<div style="max-width:700px;margin:0 auto">
  <div style="background:#fef5f5;border-left:4px solid #d32f2f;padding:1.5rem;margin-bottom:2rem">
    <h4 style="color:#d32f2f;font-size:14px;margin-bottom:.5rem" id="incident-warning">‚ö†Ô∏è CRITICAL: FOR EMERGENCIES CALL 911 FIRST</h4>
    <p style="font-size:13px;color:#666;margin:0" id="incident-subtitle">Use this form to document incidents AFTER emergency response</p>
  </div>

  <form id="incidentForm" style="display:grid;gap:1.5rem">
    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-reporter-name">Reporter Name *</label>
      <input type="text" name="reporterName" required id="input-reporter-name"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-employee-id">Employee ID (optional)</label>
      <input type="text" name="employeeId" id="input-employee-id"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-material">Material Involved *</label>
      <select name="materialInvolved" required id="select-material"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
        <option value="" id="opt-select-material">Select material...</option>
        <option>Hydrofluoric Acid</option>
        <option>Phosphoric Acid</option>
        <option>Acrylic Monomer</option>
        <option>Acetone</option>
        <option>Nickel-Chromium</option>
        <option>Liquid Nitrogen</option>
        <option>Hydrochloric Acid</option>
        <option id="opt-other">Other</option>
      </select>
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-incident-type">Incident Type *</label>
      <select name="incidentType" required id="select-incident-type"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
        <option value="" id="opt-select-type">Select type...</option>
        <option id="opt-splash">Chemical Splash</option>
        <option id="opt-contact">Skin Contact</option>
        <option id="opt-inhalation">Inhalation</option>
        <option id="opt-ingestion">Ingestion</option>
        <option id="opt-burn">Burn (Thermal/Chemical)</option>
        <option id="opt-spill">Spill</option>
        <option id="opt-nearmiss">Near Miss</option>
        <option id="opt-other-type">Other</option>
      </select>
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-body-part">Body Part Affected *</label>
      <select name="bodyPartAffected" required id="select-body-part"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
        <option value="" id="opt-select-body">Select...</option>
        <option id="opt-eyes">Eyes</option>
        <option id="opt-hands">Skin - Hands</option>
        <option id="opt-arms">Skin - Arms</option>
        <option id="opt-face">Skin - Face</option>
        <option id="opt-respiratory">Respiratory System</option>
        <option id="opt-mouth">Mouth/Digestive</option>
        <option id="opt-none">None (Near Miss)</option>
        <option id="opt-other-body">Other</option>
      </select>
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-severity">Severity *</label>
      <select name="severity" required id="select-severity"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
        <option value="" id="opt-select-severity">Select...</option>
        <option id="opt-critical">Critical (Life-threatening)</option>
        <option id="opt-high">High (Requires immediate medical attention)</option>
        <option id="opt-medium">Medium (First aid administered)</option>
        <option id="opt-low">Low (Minor/Near miss)</option>
      </select>
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-description">Incident Description *</label>
      <textarea name="description" required rows="4" id="input-description"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;resize:vertical;background:#fff!important;color:#000!important"></textarea>
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-actions">Immediate Actions Taken *</label>
      <textarea name="actionsTaken" required rows="3" id="input-actions"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;resize:vertical;background:#fff!important;color:#000!important"></textarea>
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-medical">Medical Attention Required? *</label>
      <select name="medicalAttention" required id="select-medical"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
        <option value="" id="opt-select-medical">Select...</option>
        <option id="opt-911">911 Called</option>
        <option id="opt-urgent">Urgent Care</option>
        <option id="opt-firstaid">First Aid Only</option>
        <option id="opt-nomedical">None</option>
      </select>
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-location">Location *</label>
      <input type="text" name="location" required id="input-location"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
    </div>

    <div>
      <label style="display:block;font-weight:500;margin-bottom:.5rem;font-size:14px" id="label-witnesses">Witnesses (optional)</label>
      <input type="text" name="witnesses" id="input-witnesses"
        style="width:100%;padding:.75rem;border:1px solid #e5e5e5;font:inherit;background:#fff!important;color:#000!important">
    </div>

    <div style="background:#f5f5f5;padding:1.5rem;border:1px solid #e5e5e5">
      <p style="font-size:13px;color:#666;margin-bottom:1rem" id="incident-confirm">
        By submitting this report, I confirm that the information provided is accurate to the best of my knowledge.
      </p>
      <button type="submit" class="emergency-btn" style="width:100%;font-size:15px" id="incident-submit">
        Submit Incident Report
      </button>
    </div>
  </form>

  <div id="incidentStatus" style="display:none;margin-top:2rem;padding:1.5rem;border-radius:4px"></div>
</div>
</section>
</main>

<footer>
<div class="footer-logo">&copy; 2025 NUVIA Safe - Dental Laboratory Safety System</div>
</footer>

<div class="modal-overlay" id="modal">
<div class="modal">
<div class="modal-header">
<div>
<h2 id="mTitle"></h2>
<div class="modal-cat" id="mCat"></div>
</div>
<button class="close-btn" onclick="closeM()">√ó</button>
</div>
<div class="modal-tabs">
<button class="tab-btn active" onclick="switchTab(0,this)" id="t0">Emergency</button>
<button class="tab-btn" onclick="switchTab(1,this)" id="t1">Protection</button>
<button class="tab-btn" onclick="switchTab(2,this)" id="t2">Videos</button>
<button class="tab-btn" onclick="switchTab(3,this)" id="t3">QR Code</button>
</div>
<div class="modal-body">
<div class="tab-panel active" id="p0"></div>
<div class="tab-panel" id="p1"></div>
<div class="tab-panel" id="p2"></div>
<div class="tab-panel" id="p3"></div>
</div>
</div>
</div>

<script>
const DB={
en:{
ui:{title:'Dental Laboratory Safety System',subtitle:'Fast access to emergency protocols, material safety data, and protective equipment guidelines for dental laboratory professionals.',search:'Search materials...',ft:'Filter Materials',f0:'All',f1:'Acids',f2:'Resins',f3:'Solvents',f4:'Metals',f5:'Others',view:'View Details','urgent-title':'Urgent Care Centers - Denver Area','forms-title':'Downloadable Forms',form1:'First Report of Injury Form','form1-desc':'Complete within 24 hours of any workplace injury or chemical exposure','incident-title':'Report Incident Online','incident-warning':'‚ö†Ô∏è CRITICAL: FOR EMERGENCIES CALL 911 FIRST','incident-subtitle':'Use this form to document incidents AFTER emergency response','label-reporter-name':'Reporter Name *','label-employee-id':'Employee ID (optional)','label-material':'Material Involved *','opt-select-material':'Select material...','opt-other':'Other','label-incident-type':'Incident Type *','opt-select-type':'Select type...','opt-splash':'Chemical Splash','opt-contact':'Skin Contact','opt-inhalation':'Inhalation','opt-ingestion':'Ingestion','opt-burn':'Burn (Thermal/Chemical)','opt-spill':'Spill','opt-nearmiss':'Near Miss','opt-other-type':'Other','label-body-part':'Body Part Affected *','opt-select-body':'Select...','opt-eyes':'Eyes','opt-hands':'Skin - Hands','opt-arms':'Skin - Arms','opt-face':'Skin - Face','opt-respiratory':'Respiratory System','opt-mouth':'Mouth/Digestive','opt-none':'None (Near Miss)','opt-other-body':'Other','label-severity':'Severity *','opt-select-severity':'Select...','opt-critical':'Critical (Life-threatening)','opt-high':'High (Requires immediate medical attention)','opt-medium':'Medium (First aid administered)','opt-low':'Low (Minor/Near miss)','label-description':'Incident Description *','ph-description':'Describe what happened, when, and how...','label-actions':'Immediate Actions Taken *','ph-actions':'What steps were taken immediately after the incident?','label-medical':'Medical Attention Required? *','opt-select-medical':'Select...','opt-911':'911 Called','opt-urgent':'Urgent Care','opt-firstaid':'First Aid Only','opt-nomedical':'None','label-location':'Location *','ph-location':'Lab area, workstation, etc.','label-witnesses':'Witnesses (optional)','ph-witnesses':'Names of witnesses, if any','incident-confirm':'By submitting this report, I confirm that the information provided is accurate to the best of my knowledge.','incident-submit':'Submit Incident Report',t0:'Emergency Protocol',t1:'Protection',t2:'Videos',t3:'QR Code',eyes:'üëÅÔ∏è Eyes',skin:'üñêÔ∏è Skin',nose:'üëÉ Inhalation',mouth:'üëÑ Ingestion','welcome-title':'About This Platform','welcome-p1':'This platform was created to provide quick, clear, and reliable access to emergency protocols, safety information, and protective equipment used in dental laboratories.','welcome-p2':'NUVIA Dental Safety centralizes essential guidelines for the safe handling of materials and for acting effectively in case of exposure or injury. Its goal is to reduce response time to incidents, support informed decision-making, and foster a safety culture for all people who work in or visit the laboratory.','welcome-priority':'Your safety is a priority. If in doubt, follow emergency protocols and seek immediate medical attention.'},
cats:{acids:'Acids',resins:'Resins',solvents:'Solvents',metals:'Metals',others:'Others'},
materials:[
{id:'hf',name:'Hydrofluoric Acid (HF)',cat:'acids',icon:'‚öóÔ∏è',risk:'danger',riskL:'High',desc:'Ceramic etching. Extremely corrosive. Systemic toxicity.',exposure:{eyes:'Rinse immediately 15-30 minutes with warm water. Hold eyelids open. Seek emergency care IMMEDIATELY',skin:'Remove contaminated clothing. Wash with water 15+ minutes. Apply calcium gluconate gel 2.5%. Call 911',nose:'Move to fresh air immediately. If difficulty breathing call 911. Monitor for delayed symptoms',mouth:'Do NOT induce vomiting. Rinse mouth. Drink water. Call 911 immediately'},alerts:[{t:'red',h:'CRITICAL',i:['Can cause cardiac arrest from hypocalcemia','Pain may appear hours after exposure','Always requires emergency medical attention']}],epp:['Safety goggles required','Nitrile gloves ‚â•4mil','Polypropylene coat','FFP2','Waterproof apron'],videos:[{title:'Hydrofluoric Acid Safety',url:'https://www.youtube.com/embed/oipYLUJFZqs'},{title:'HF Emergency Response',url:'https://www.youtube.com/embed/5O6HPjFcZ9Y'}]},
{id:'h3po4',name:'Phosphoric Acid',cat:'acids',icon:'‚öóÔ∏è',risk:'danger',riskL:'High',desc:'Enamel etchant 35-40%. Corrosive.',exposure:{eyes:'Rinse immediately 15 minutes minimum. Seek emergency care',skin:'Wash thoroughly 10 minutes. Apply moisturizing cream',nose:'Move to fresh air. If irritation persists see doctor',mouth:'Do NOT induce vomiting. Drink water or milk. Call poison control'},alerts:[{t:'yellow',h:'CAUTION',i:['Severe burns on prolonged contact','Less aggressive than HF but still dangerous']}],epp:['Safety glasses','Nitrile gloves','Lab coat','Mask'],videos:[{title:'Phosphoric Acid Etching Safety',url:'https://www.youtube.com/embed/JDGEqtoQX6w'}]},
{id:'mma',name:'Acrylic Monomer (MMA)',cat:'resins',icon:'üß™',risk:'danger',riskL:'High',desc:'Acrylic resin liquid. Flammable. Sensitizer.',exposure:{eyes:'Rinse 10-15 minutes. Seek care if irritation persists',skin:'Wash immediately 5 minutes. If allergic reaction develops see doctor',nose:'Move to fresh air. Ventilate area. If dizziness or nausea call 911',mouth:'Rinse mouth. Do NOT induce vomiting. Drink water. Call poison control'},alerts:[{t:'red',h:'FLAMMABLE',i:['Flash point 10¬∞C','No smoking or open flames','Keep away from heat sources']},{t:'yellow',h:'SENSITIZER',i:['Can cause permanent allergy','Minimize skin contact','Use local extraction ventilation']}],epp:['A2 vapor filter','Nitrile gloves (change every 20min)','Safety goggles','Fume hood']},
{id:'ace',name:'Acetone',cat:'solvents',icon:'üß¥',risk:'danger',riskL:'High',desc:'Organic solvent. Highly flammable.',exposure:{eyes:'Rinse 10-15 minutes with clean water',skin:'Wash with soap and water. Apply moisturizer (causes drying)',nose:'Move to fresh air. If dizzy or nauseous call 911',mouth:'Rinse mouth. Do NOT induce vomiting. Call poison control'},alerts:[{t:'red',h:'HIGHLY FLAMMABLE',i:['Flash point -18¬∞C','No flames or cigarettes anywhere near','Store in flameproof cabinet only']}],epp:['A2 vapor filter','Nitrile gloves','Safety glasses','Adequate ventilation']},
{id:'nicr',name:'Nickel-Chromium',cat:'metals',icon:'‚öôÔ∏è',risk:'danger',riskL:'High',desc:'Framework alloy. Carcinogenic dust/fumes.',exposure:{eyes:'Rinse 10-15 minutes. Particles may be abrasive',skin:'Wash thoroughly. If allergic reaction develops (rash, itching) see doctor',nose:'Exit area immediately. Acute symptoms call 911. Monitor breathing',mouth:'Rinse mouth thoroughly. Do NOT induce vomiting. Drink water'},alerts:[{t:'red',h:'CARCINOGENIC',i:['Nickel classified Group 1 carcinogen IARC','Hexavalent chromium cancer risk','Always use extraction when grinding']}],epp:['FFP3 respirator','Full face shield','Heat-resistant gloves','Local dust extraction']},
{id:'n2',name:'Liquid Nitrogen',cat:'others',icon:'üì¶',risk:'danger',riskL:'High',desc:'Cryogenic coolant. Severe frostbite. Asphyxiation.',exposure:{eyes:'DO NOT RUB. Flush with warm water 37-40¬∞C for 15-20 minutes. Call 911',skin:'DO NOT RUB affected area. Warm gently with water 37-40¬∞C. Call 911 for frostbite',nose:'EVACUATE AREA. Expands 700x displacing oxygen. Unconscious victims - DO NOT enter without self-contained breathing apparatus',mouth:'Rinse mouth with warm water. Seek immediate medical attention'},alerts:[{t:'red',h:'CRYOGENIC HAZARD',i:['Boiling point -196¬∞C causes instant frostbite','Oxygen displacement can cause asphyxiation','Oxygen detector required in work area']}],epp:['Cryogenic gloves (long cuff)','Face shield','Lab coat','Closed-toe shoes']},
{id:'hcl',name:'Hydrochloric Acid',cat:'acids',icon:'‚öóÔ∏è',risk:'danger',riskL:'High',desc:'Metal cleaning. Corrosive fumes.',exposure:{eyes:'Rinse immediately 15-20 minutes. Seek urgent ophthalmology care',skin:'Wash 15 minutes. If burn present go to ER',nose:'Evacuate area. Fumes can cause pulmonary edema hours later. Seek medical evaluation',mouth:'Do NOT induce vomiting. Rinse mouth. Drink water. Call 911'},alerts:[{t:'red',h:'CORROSIVE FUMES',i:['Severe respiratory irritation','NEVER mix with bleach - produces toxic chlorine gas','Always use fume hood']}],epp:['Side-shield goggles','PVC or neoprene gloves','Acid-resistant apron','Filter B respirator']}
],
urgent:[
{name:'Concentra Urgent Care - Denver Tech',address:'7700 E Arapahoe Rd, Centennial, CO 80112',phone:'(303) 865-7400',hours:'Mon-Fri 8AM-7PM, Sat-Sun 9AM-5PM'},
{name:'UCHealth Urgent Care - Stapleton',address:'7600 E 29th Ave, Denver, CO 80238',phone:'(720) 848-1000',hours:'Every day 8AM-8PM'},
{name:'AFC Urgent Care - Glendale',address:'4500 E 9th Ave #100, Denver, CO 80220',phone:'(303) 355-2323',hours:'Every day 8AM-8PM'},
{name:'Concentra Urgent Care - Aurora',address:'14000 E Ellsworth Ave, Aurora, CO 80012',phone:'(303) 745-2200',hours:'Mon-Fri 7AM-7PM, Sat 8AM-4PM'},
{name:'Denver Health - Park Hill',address:'4860 Peoria St, Denver, CO 80239',phone:'(303) 602-2100',hours:'Mon-Fri 7AM-7PM, Sat-Sun 9AM-5PM'}
]
},
es:{
ui:{title:'Sistema de Seguridad para Laboratorio Dental',subtitle:'Acceso r√°pido a protocolos de emergencia, datos de seguridad de materiales y gu√≠as de equipo de protecci√≥n para profesionales de laboratorio dental.',search:'Buscar materiales...',ft:'Filtrar Materiales',f0:'Todos',f1:'√Åcidos',f2:'Resinas',f3:'Solventes',f4:'Metales',f5:'Otros',view:'Ver Detalles','urgent-title':'Centros de Atenci√≥n Urgente - √Årea Denver','forms-title':'Formularios Descargables',form1:'Primer Reporte de Lesi√≥n','form1-desc':'Completar dentro de 24 horas de cualquier lesi√≥n laboral o exposici√≥n qu√≠mica','incident-title':'Reportar Incidente Online','incident-warning':'‚ö†Ô∏è CR√çTICO: PARA EMERGENCIAS LLAME AL 911 PRIMERO','incident-subtitle':'Use este formulario para documentar incidentes DESPU√âS de la respuesta de emergencia','label-reporter-name':'Nombre del Reportero *','label-employee-id':'ID de Empleado (opcional)','label-material':'Material Involucrado *','opt-select-material':'Seleccionar material...','opt-other':'Otro','label-incident-type':'Tipo de Incidente *','opt-select-type':'Seleccionar tipo...','opt-splash':'Salpicadura Qu√≠mica','opt-contact':'Contacto con la Piel','opt-inhalation':'Inhalaci√≥n','opt-ingestion':'Ingesti√≥n','opt-burn':'Quemadura (T√©rmica/Qu√≠mica)','opt-spill':'Derrame','opt-nearmiss':'Casi Accidente','opt-other-type':'Otro','label-body-part':'Parte del Cuerpo Afectada *','opt-select-body':'Seleccionar...','opt-eyes':'Ojos','opt-hands':'Piel - Manos','opt-arms':'Piel - Brazos','opt-face':'Piel - Cara','opt-respiratory':'Sistema Respiratorio','opt-mouth':'Boca/Digestivo','opt-none':'Ninguna (Casi Accidente)','opt-other-body':'Otro','label-severity':'Severidad *','opt-select-severity':'Seleccionar...','opt-critical':'Cr√≠tico (Amenaza de vida)','opt-high':'Alto (Requiere atenci√≥n m√©dica inmediata)','opt-medium':'Medio (Primeros auxilios administrados)','opt-low':'Bajo (Menor/Casi accidente)','label-description':'Descripci√≥n del Incidente *','ph-description':'Describa qu√© pas√≥, cu√°ndo y c√≥mo...','label-actions':'Acciones Inmediatas Tomadas *','ph-actions':'¬øQu√© pasos se tomaron inmediatamente despu√©s del incidente?','label-medical':'¬øSe Requiri√≥ Atenci√≥n M√©dica? *','opt-select-medical':'Seleccionar...','opt-911':'Llamada al 911','opt-urgent':'Atenci√≥n Urgente','opt-firstaid':'Solo Primeros Auxilios','opt-nomedical':'Ninguna','label-location':'Ubicaci√≥n *','ph-location':'√Årea del laboratorio, estaci√≥n de trabajo, etc.','label-witnesses':'Testigos (opcional)','ph-witnesses':'Nombres de los testigos, si los hay','incident-confirm':'Al enviar este reporte, confirmo que la informaci√≥n proporcionada es precisa seg√∫n mi conocimiento.','incident-submit':'Enviar Reporte de Incidente',t0:'Protocolo Emergencia',t1:'Protecci√≥n',t2:'Videos',t3:'C√≥digo QR',eyes:'üëÅÔ∏è Ojos',skin:'üñêÔ∏è Piel',nose:'üëÉ Inhalaci√≥n',mouth:'üëÑ Ingesti√≥n','welcome-title':'Acerca de Esta Plataforma','welcome-p1':'Esta plataforma fue creada para brindar acceso r√°pido, claro y confiable a protocolos de emergencia, informaci√≥n de seguridad y equipos de protecci√≥n utilizados en laboratorios dentales.','welcome-p2':'NUVIA Dental Safety centraliza las gu√≠as esenciales para el manejo seguro de materiales y para actuar de manera efectiva en caso de exposici√≥n o lesi√≥n. Su objetivo es reducir el tiempo de respuesta ante incidentes, apoyar la toma de decisiones informadas y fomentar una cultura de seguridad para todas las personas que trabajan o visitan el laboratorio.','welcome-priority':'Tu seguridad es una prioridad. Ante cualquier duda, sigue los protocolos de emergencia y busca atenci√≥n m√©dica de inmediato.'},
cats:{acids:'√Åcidos',resins:'Resinas',solvents:'Solventes',metals:'Metales',others:'Otros'},
materials:[
{id:'hf',name:'√Åcido Fluorh√≠drico (HF)',cat:'acids',icon:'‚öóÔ∏è',risk:'danger',riskL:'Alto',desc:'Grabado cer√°mica. Extremadamente corrosivo. Toxicidad sist√©mica.',exposure:{eyes:'Enjuagar inmediatamente 15-30 minutos con agua tibia. Mantener p√°rpados abiertos. Buscar atenci√≥n de emergencia INMEDIATAMENTE',skin:'Quitar ropa contaminada. Lavar con agua 15+ minutos. Aplicar gel gluconato de calcio 2.5%. Llamar 911',nose:'Mover a aire fresco inmediatamente. Si dificultad para respirar llamar 911. Monitorear s√≠ntomas tard√≠os',mouth:'NO inducir v√≥mito. Enjuagar boca. Beber agua. Llamar 911 inmediatamente'},alerts:[{t:'red',h:'CR√çTICO',i:['Puede causar paro card√≠aco por hipocalcemia','Dolor puede aparecer horas despu√©s de exposici√≥n','Siempre requiere atenci√≥n m√©dica de emergencia']}],epp:['Gafas protectoras requeridas','Guantes nitrilo ‚â•4mil','Bata polipropileno','FFP2','Delantal impermeable'],videos:[{title:'Seguridad √Åcido Fluorh√≠drico',url:'https://www.youtube.com/embed/oipYLUJFZqs'},{title:'Respuesta Emergencia HF',url:'https://www.youtube.com/embed/5O6HPjFcZ9Y'}]},
{id:'h3po4',name:'√Åcido Fosf√≥rico',cat:'acids',icon:'‚öóÔ∏è',risk:'danger',riskL:'Alto',desc:'Grabador esmalte 35-40%. Corrosivo.',exposure:{eyes:'Enjuagar inmediatamente 15 minutos m√≠nimo. Buscar atenci√≥n de emergencia',skin:'Lavar completamente 10 minutos. Aplicar crema hidratante',nose:'Mover a aire fresco. Si irritaci√≥n persiste ver m√©dico',mouth:'NO inducir v√≥mito. Beber agua o leche. Llamar control envenenamiento'},alerts:[{t:'yellow',h:'PRECAUCI√ìN',i:['Quemaduras graves con contacto prolongado','Menos agresivo que HF pero a√∫n peligroso']}],epp:['Gafas seguridad','Guantes nitrilo','Bata laboratorio','Mascarilla']},
{id:'mma',name:'Mon√≥mero Acr√≠lico (MMA)',cat:'resins',icon:'üß™',risk:'danger',riskL:'Alto',desc:'L√≠quido resina acr√≠lica. Inflamable. Sensibilizador.',exposure:{eyes:'Enjuagar 10-15 minutos. Buscar atenci√≥n si irritaci√≥n persiste',skin:'Lavar inmediatamente 5 minutos. Si reacci√≥n al√©rgica se desarrolla ver m√©dico',nose:'Mover a aire fresco. Ventilar √°rea. Si mareo o n√°usea llamar 911',mouth:'Enjuagar boca. NO inducir v√≥mito. Beber agua. Llamar control envenenamiento'},alerts:[{t:'red',h:'INFLAMABLE',i:['Punto inflamaci√≥n 10¬∞C','No fumar ni llamas abiertas','Mantener lejos de fuentes de calor']},{t:'yellow',h:'SENSIBILIZADOR',i:['Puede causar alergia permanente','Minimizar contacto con piel','Usar ventilaci√≥n de extracci√≥n local']}],epp:['Filtro vapor A2','Guantes nitrilo (cambiar cada 20min)','Gafas seguridad','Campana extractora']},
{id:'ace',name:'Acetona',cat:'solvents',icon:'üß¥',risk:'danger',riskL:'Alto',desc:'Solvente org√°nico. Altamente inflamable.',exposure:{eyes:'Enjuagar 10-15 minutos con agua limpia',skin:'Lavar con agua y jab√≥n. Aplicar hidratante (causa resequedad)',nose:'Mover a aire fresco. Si mareo o n√°usea llamar 911',mouth:'Enjuagar boca. NO inducir v√≥mito. Llamar control envenenamiento'},alerts:[{t:'red',h:'ALTAMENTE INFLAMABLE',i:['Punto inflamaci√≥n -18¬∞C','Sin llamas ni cigarrillos cerca','Almacenar solo en gabinete antideflagrante']}],epp:['Filtro vapor A2','Guantes nitrilo','Gafas seguridad','Ventilaci√≥n adecuada']},
{id:'nicr',name:'N√≠quel-Cromo',cat:'metals',icon:'‚öôÔ∏è',risk:'danger',riskL:'Alto',desc:'Aleaci√≥n estructura. Polvo/humos cancer√≠genos.',exposure:{eyes:'Enjuagar 10-15 minutos. Part√≠culas pueden ser abrasivas',skin:'Lavar completamente. Si reacci√≥n al√©rgica (sarpullido, picaz√≥n) ver m√©dico',nose:'Salir del √°rea inmediatamente. S√≠ntomas agudos llamar 911. Monitorear respiraci√≥n',mouth:'Enjuagar boca completamente. NO inducir v√≥mito. Beber agua'},alerts:[{t:'red',h:'CANCER√çGENO',i:['N√≠quel clasificado Grupo 1 cancer√≠geno IARC','Riesgo c√°ncer cromo hexavalente','Siempre usar extracci√≥n al pulir']}],epp:['Respirador FFP3','Pantalla facial completa','Guantes resistentes calor','Extracci√≥n local de polvo']},
{id:'n2',name:'Nitr√≥geno L√≠quido',cat:'others',icon:'üì¶',risk:'danger',riskL:'Alto',desc:'Refrigerante criog√©nico. Congelaci√≥n severa. Asfixia.',exposure:{eyes:'NO FROTAR. Lavar con agua tibia 37-40¬∞C por 15-20 minutos. Llamar 911',skin:'NO FROTAR √°rea afectada. Calentar suavemente con agua 37-40¬∞C. Llamar 911 por congelaci√≥n',nose:'EVACUAR √ÅREA. Expande 700x desplazando ox√≠geno. V√≠ctimas inconscientes - NO entrar sin aparato respiraci√≥n aut√≥nomo',mouth:'Enjuagar boca con agua tibia. Buscar atenci√≥n m√©dica inmediata'},alerts:[{t:'red',h:'PELIGRO CRIOG√âNICO',i:['Punto ebullici√≥n -196¬∞C causa congelaci√≥n instant√°nea','Desplazamiento ox√≠geno puede causar asfixia','Detector ox√≠geno requerido en √°rea trabajo']}],epp:['Guantes criog√©nicos (pu√±o largo)','Pantalla facial','Bata laboratorio','Zapatos punta cerrada']},
{id:'hcl',name:'√Åcido Clorh√≠drico',cat:'acids',icon:'‚öóÔ∏è',risk:'danger',riskL:'Alto',desc:'Limpieza metales. Humos corrosivos.',exposure:{eyes:'Enjuagar inmediatamente 15-20 minutos. Buscar atenci√≥n oftalmolog√≠a urgente',skin:'Lavar 15 minutos. Si quemadura presente ir a urgencias',nose:'Evacuar √°rea. Humos pueden causar edema pulmonar horas despu√©s. Buscar evaluaci√≥n m√©dica',mouth:'NO inducir v√≥mito. Enjuagar boca. Beber agua. Llamar 911'},alerts:[{t:'red',h:'HUMOS CORROSIVOS',i:['Irritaci√≥n respiratoria severa','NUNCA mezclar con lej√≠a - produce gas cloro t√≥xico','Siempre usar campana extractora']}],epp:['Gafas protecci√≥n lateral','Guantes PVC o neopreno','Delantal resistente √°cidos','Respirador filtro B']}
],
urgent:[
{name:'Concentra Atenci√≥n Urgente - Denver Tech',address:'7700 E Arapahoe Rd, Centennial, CO 80112',phone:'(303) 865-7400',hours:'Lun-Vie 8AM-7PM, S√°b-Dom 9AM-5PM'},
{name:'UCHealth Atenci√≥n Urgente - Stapleton',address:'7600 E 29th Ave, Denver, CO 80238',phone:'(720) 848-1000',hours:'Todos d√≠as 8AM-8PM'},
{name:'AFC Atenci√≥n Urgente - Glendale',address:'4500 E 9th Ave #100, Denver, CO 80220',phone:'(303) 355-2323',hours:'Todos d√≠as 8AM-8PM'},
{name:'Concentra Atenci√≥n Urgente - Aurora',address:'14000 E Ellsworth Ave, Aurora, CO 80012',phone:'(303) 745-2200',hours:'Lun-Vie 7AM-7PM, S√°b 8AM-4PM'},
{name:'Denver Health - Park Hill',address:'4860 Peoria St, Denver, CO 80239',phone:'(303) 602-2100',hours:'Lun-Vie 7AM-7PM, S√°b-Dom 9AM-5PM'}
]
}
};
let L='en',F='all',C=DB.en;
function setLang(l){
L=l;C=DB[l];
localStorage.setItem('lang', l);
document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active',b.textContent===l.toUpperCase()));
Object.keys(C.ui).forEach(k=>{const el=document.getElementById(k);if(el)el.textContent=C.ui[k]});
document.getElementById('search').placeholder=C.ui.search;
// Translate incident form placeholders
const descInput = document.getElementById('input-description');
const actionsInput = document.getElementById('input-actions');
const locationInput = document.getElementById('input-location');
const witnessesInput = document.getElementById('input-witnesses');
if(descInput) descInput.placeholder = C.ui['ph-description'] || '';
if(actionsInput) actionsInput.placeholder = C.ui['ph-actions'] || '';
if(locationInput) locationInput.placeholder = C.ui['ph-location'] || '';
if(witnessesInput) witnessesInput.placeholder = C.ui['ph-witnesses'] || '';
render();renderUrgent();
}
function setFilter(f,b){
F=f;
document.querySelectorAll('.filter-btn').forEach(x=>x.classList.remove('active'));
b.classList.add('active');
render();
}
function filter(){render()}
function render(){
const q=document.getElementById('search').value.toLowerCase();
let l=C.materials;
if(F!=='all')l=l.filter(m=>m.cat===F);
if(q)l=l.filter(m=>m.name.toLowerCase().includes(q)||m.desc.toLowerCase().includes(q));
document.getElementById('grid').innerHTML=l.map(m=>`<div class="card" onclick="openM('${m.id}')">
<div class="card-header">
<span class="card-icon">${m.icon}</span>
<span class="risk-badge badge-${m.risk}">${m.riskL}</span>
</div>
<h3>${m.name}</h3>
<div class="card-cat">${C.cats[m.cat]}</div>
<div class="card-desc">${m.desc}</div>
<div class="card-footer">${C.ui.view}</div>
</div>`).join('');
}
function renderUrgent(){
document.getElementById('urgent-list').innerHTML=C.urgent.map(u=>`<div class="list-card">
<h3>${u.name}</h3>
<p>${u.address}</p>
<p class="phone">üìû ${u.phone}</p>
<p style="font-size:13px;color:#666;margin-top:.5rem">${u.hours}</p>
</div>`).join('');
}
function openM(id){
const m=C.materials.find(x=>x.id===id);
if(!m)return;
document.getElementById('mTitle').textContent=m.name;
document.getElementById('mCat').textContent=C.cats[m.cat];
const exp=`<div class="exposure-grid">
<div class="exposure-card"><h4><span class="exposure-icon">${C.ui.eyes.split(' ')[0]}</span>${C.ui.eyes.split(' ')[1]}</h4><p>${m.exposure.eyes}</p></div>
<div class="exposure-card"><h4><span class="exposure-icon">${C.ui.skin.split(' ')[0]}</span>${C.ui.skin.split(' ')[1]}</h4><p>${m.exposure.skin}</p></div>
<div class="exposure-card"><h4><span class="exposure-icon">${C.ui.nose.split(' ')[0]}</span>${C.ui.nose.split(' ')[1]}</h4><p>${m.exposure.nose}</p></div>
<div class="exposure-card"><h4><span class="exposure-icon">${C.ui.mouth.split(' ')[0]}</span>${C.ui.mouth.split(' ')[1]}</h4><p>${m.exposure.mouth}</p></div>
</div>`;
const al=m.alerts.map(a=>`<div class="alert-block ${a.t}"><h4>${a.h}</h4><ul>${a.i.map(x=>`<li>${x}</li>`).join('')}</ul></div>`).join('');
document.getElementById('p0').innerHTML=exp+al;
document.getElementById('p1').innerHTML=`<div class="epp-list">${m.epp.map(e=>`<div class="epp-item">${e}</div>`).join('')}</div>`;
document.getElementById('p2').innerHTML=m.videos?`<div style="display:grid;gap:2rem">${m.videos.map(v=>`<div><h4 style="font-size:15px;font-weight:500;margin-bottom:1rem">${v.title}</h4><div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden"><iframe src="${v.url}" style="position:absolute;top:0;left:0;width:100%;height:100%;border:none" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture" allowfullscreen></iframe></div></div>`).join('')}</div>`:`<p style="text-align:center;color:#666;padding:3rem">${L==='en'?'No videos available for this material':'No hay videos disponibles para este material'}</p>`;
document.getElementById('p3').innerHTML=`<div class="qr-section"><h4>${L==='en'?'Scan to access this material':'Escanear para acceder a este material'}</h4><div class="qr-code" id="qr"></div></div>`;
setTimeout(()=>{
const qr=document.getElementById('qr');
if(qr&&typeof QRCode!=='undefined'){
qr.innerHTML='';
new QRCode(qr,{text:location.origin+location.pathname+'?m='+m.id,width:180,height:180,colorDark:'#000',colorLight:'#fff'});
}
},100);
document.querySelectorAll('.tab-btn').forEach((b,i)=>b.classList.toggle('active',i===0));
document.querySelectorAll('.tab-panel').forEach((p,i)=>p.classList.toggle('active',i===0));
document.getElementById('modal').classList.add('open');
}
function closeM(){document.getElementById('modal').classList.remove('open')}
function switchTab(n,b){
document.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));
document.querySelectorAll('.tab-panel').forEach(x=>x.classList.remove('active'));
b.classList.add('active');
document.getElementById('p'+n).classList.add('active');
}
render();renderUrgent();

// Check for saved language preference
const savedLang = localStorage.getItem('lang');
if(savedLang && (savedLang === 'en' || savedLang === 'es')) {
  setLang(savedLang);
}

// Handle QR code scanning - open material from URL parameter
const urlM=new URLSearchParams(location.search).get('m');
if(urlM){
  console.log('QR Code detected! Material ID:', urlM);
  const mat=C.materials.find(x=>x.id===urlM);
  if(mat){
    console.log('Material found:', mat.name);
    // Wait a bit for page to fully load, then open modal
    setTimeout(() => openM(mat.id), 300);
  } else {
    console.error('Material not found with ID:', urlM);
  }
}

// ========================================
// INCIDENT REPORT FORM HANDLER
// ========================================
const INCIDENT_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwJjwICqvZYTlM0iB9f7RsGb9Bdw7n60uX9CFDRTnnma5yAYivUhr6Uk41-WhCxIGy_jA/exec';

const incidentForm = document.getElementById('incidentForm');
if (incidentForm) {
  incidentForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const submitBtn = e.target.querySelector('button[type="submit"]');
    const statusDiv = document.getElementById('incidentStatus');
    const originalBtnText = submitBtn.textContent;
    
    // Disable button
    submitBtn.disabled = true;
    submitBtn.textContent = L === 'es' ? 'Enviando...' : 'Submitting...';
    submitBtn.style.opacity = '0.6';
    
    // Collect form data
    const formData = new FormData(e.target);
    const incident = Object.fromEntries(formData.entries());
    
    try {
      // Send to Google Apps Script
      await fetch(INCIDENT_SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(incident)
      });
      
      // Show success message
      statusDiv.style.display = 'block';
      statusDiv.style.background = '#f1f8f4';
      statusDiv.style.borderLeft = '4px solid #388e3c';
      statusDiv.style.color = '#000';
      
      if (L === 'es') {
        statusDiv.innerHTML = `
          <h4 style="color:#388e3c;margin:0 0 .5rem 0;font-size:16px">‚úì Reporte Enviado Exitosamente</h4>
          <p style="margin:0;font-size:14px;color:#666">El manager ha sido notificado por email.</p>
          <p style="margin:.5rem 0 0 0;font-size:13px;color:#999">Recibir√°s confirmaci√≥n en breve.</p>
        `;
      } else {
        statusDiv.innerHTML = `
          <h4 style="color:#388e3c;margin:0 0 .5rem 0;font-size:16px">‚úì Report Submitted Successfully</h4>
          <p style="margin:0;font-size:14px;color:#666">Manager has been notified via email.</p>
          <p style="margin:.5rem 0 0 0;font-size:13px;color:#999">You will receive confirmation shortly.</p>
        `;
      }
      
      // Reset form
      e.target.reset();
      
      // Scroll to status
      setTimeout(() => {
        statusDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }, 100);
      
    } catch (error) {
      // Show error message
      statusDiv.style.display = 'block';
      statusDiv.style.background = '#fef5f5';
      statusDiv.style.borderLeft = '4px solid #d32f2f';
      statusDiv.style.color = '#000';
      
      if (L === 'es') {
        statusDiv.innerHTML = `
          <h4 style="color:#d32f2f;margin:0 0 .5rem 0">‚úó Error al Enviar</h4>
          <p style="margin:0;font-size:14px;color:#666">${error.message}</p>
          <p style="margin:.5rem 0 0 0;font-size:13px;color:#999">Por favor intenta de nuevo o contacta a tu manager directamente.</p>
        `;
      } else {
        statusDiv.innerHTML = `
          <h4 style="color:#d32f2f;margin:0 0 .5rem 0">‚úó Submission Error</h4>
          <p style="margin:0;font-size:14px;color:#666">${error.message}</p>
          <p style="margin:.5rem 0 0 0;font-size:13px;color:#999">Please try again or contact your manager directly.</p>
        `;
      }
    } finally {
      // Re-enable button
      submitBtn.disabled = false;
      submitBtn.textContent = originalBtnText;
      submitBtn.style.opacity = '1';
    }
  });
}
</script>
</body>
</html>
